<div class="quiz-preview-container">
  <!-- Header -->
  <div class="preview-header">
    <div class="header-content">
      <div class="header-badge">
        <app-svg-icon name="Eye" />
        Mode Aperçu
      </div>
      <h1>{{ quizTitle() }}</h1>
      @if (quizDescription()) {
        <p class="description">{{ quizDescription() }}</p>
      }
      <div class="quiz-meta">
        <div class="meta-item">
          <app-svg-icon name="HelpCircle" />
          <span>{{ questions().length }} questions</span>
        </div>
        <div class="meta-item">
          <app-svg-icon name="Award" />
          <span>{{ getTotalPoints() }} points au total</span>
        </div>
      </div>
    </div>
    <button class="btn-close" (click)="close()">
      <app-svg-icon name="X" />
      Fermer l'aperçu
    </button>
  </div>

  <!-- Progress -->
  <div class="progress-section">
    <div class="progress-bar">
      <div class="progress-fill" [style.width.%]="((currentQuestionIndex() + 1) / questions().length) * 100"></div>
    </div>
    <span class="progress-text">Question {{ currentQuestionIndex() + 1 }} / {{ questions().length }}</span>
  </div>

  <!-- Question Card -->
  <div class="question-card">
    <div class="question-header">
      <div class="question-number">
        <app-svg-icon name="MessageCircle" />
        Question {{ currentQuestionIndex() + 1 }}
      </div>
      <div class="question-meta">
        <span class="question-type">{{ getQuestionTypeBadge(currentQuestion.type) }}</span>
        <span class="question-points">
          <app-svg-icon name="Star" size="sm" />
          {{ currentQuestion.points }} pt(s)
        </span>
      </div>
    </div>

    <div class="question-text">
      {{ currentQuestion.text }}
    </div>

    <!-- Multiple Choice -->
    @if (currentQuestion.type === 'multiple' && currentQuestion.options) {
      <div class="answer-section">
        <div class="options-list">
          @for (option of currentQuestion.options; track $index) {
            <div class="option-item preview-mode">
              <div class="option-letter">{{ getOptionLetter($index) }}</div>
              <div class="option-text">{{ option }}</div>
            </div>
          }
        </div>
      </div>
    }

    <!-- True/False -->
    @if (currentQuestion.type === 'close' && currentQuestion.options) {
      <div class="answer-section">
        <div class="options-list">
          @for (option of currentQuestion.options; track $index) {
            <div class="option-item preview-mode">
              <div class="option-radio"></div>
              <div class="option-text">{{ option }}</div>
            </div>
          }
        </div>
      </div>
    }

    <!-- Open Question -->
    @if (currentQuestion.type === 'open') {
      <div class="answer-section">
        <div class="textarea-preview">
          <div class="textarea-label">
            <app-svg-icon name="Edit3" size="sm" />
            Zone de réponse libre
          </div>
          <div class="textarea-placeholder">
            Les étudiants pourront rédiger leur réponse ici...
          </div>
        </div>
      </div>
    }
  </div>

  <!-- Navigation Dots -->
  <div class="navigation-dots">
    @for (question of questions(); track $index) {
      <button 
        class="dot"
        [class.active]="$index === currentQuestionIndex()"
        (click)="goToQuestion($index)"
        [attr.aria-label]="'Aller à la question ' + ($index + 1)">
        {{ $index + 1 }}
      </button>
    }
  </div>

  <!-- Navigation Buttons -->
  <div class="navigation-buttons">
    <button 
      class="btn-outline"
      (click)="previousQuestion()"
      [disabled]="isFirstQuestion">
      <app-svg-icon name="ChevronLeft" />
      Précédent
    </button>

    <button 
      class="btn-primary"
      (click)="nextQuestion()"
      [disabled]="isLastQuestion">
      Suivant
      <app-svg-icon name="ChevronRight" />
    </button>
  </div>
</div>
