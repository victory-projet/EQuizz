<div class="quiz-management-container">
  <div class="page-header">
    <div>
      <h1>
        <app-svg-icon name="FileText" class="title-icon" />
        Gestion des Quiz
      </h1>
      <p class="subtitle">Vue d'ensemble de tous vos questionnaires d'évaluation</p>
    </div>
    <button class="btn-primary" (click)="onCreateQuiz()">
      <app-svg-icon name="Plus" />
      Créer un Quiz
    </button>
  </div>

  <!-- Statistics Cards -->
  <div class="stats-grid">
    <div class="stat-card">
      <div class="stat-icon purple">
        <app-svg-icon name="FileText" />
      </div>
      <div class="stat-content">
        <p class="stat-label">Total Quiz</p>
        <div class="stat-value">{{ getTotalQuizzes() }}</div>
      </div>
    </div>

    <div class="stat-card">
      <div class="stat-icon green">
        <app-svg-icon name="CheckCircle" />
      </div>
      <div class="stat-content">
        <p class="stat-label">Quiz actifs</p>
        <div class="stat-value">{{ getActiveQuizzes() }}</div>
      </div>
    </div>

    <div class="stat-card">
      <div class="stat-icon blue">
        <app-svg-icon name="Users" />
      </div>
      <div class="stat-content">
        <p class="stat-label">Taux de participation</p>
        <div class="stat-value">76%</div>
      </div>
    </div>

    <div class="stat-card">
      <div class="stat-icon orange">
        <app-svg-icon name="Save" />
      </div>
      <div class="stat-content">
        <p class="stat-label">Brouillons</p>
        <div class="stat-value">{{ getDraftQuizzes() }}</div>
      </div>
    </div>
  </div>

  <!-- Search Section -->
  <div class="search-section">
    <div class="search-wrapper">
      <app-svg-icon name="Search" class="search-icon" />
      <input 
        type="text" 
        class="search-input" 
        placeholder="Rechercher un quiz par titre, UE ou classe..."
        [(ngModel)]="searchTerm"
        (input)="onSearch()"
      />
    </div>
  </div>

  <!-- Filter Tabs -->
  <div class="filter-tabs">
    <button 
      class="tab" 
      [class.active]="currentFilter() === 'all'"
      (click)="setFilter('all')"
    >
      Tous ({{ getTotalQuizzes() }})
    </button>
    <button 
      class="tab" 
      [class.active]="currentFilter() === 'active'"
      (click)="setFilter('active')"
    >
      En cours ({{ getActiveQuizzes() }})
    </button>
    <button 
      class="tab" 
      [class.active]="currentFilter() === 'draft'"
      (click)="setFilter('draft')"
    >
      Brouillons ({{ getDraftQuizzes() }})
    </button>
    <button 
      class="tab" 
      [class.active]="currentFilter() === 'closed'"
      (click)="setFilter('closed')"
    >
      Clôturés ({{ getCompletedQuizzes() }})
    </button>
  </div>

  @if (isLoading()) {
    <div class="loading-state">
      <app-loading-spinner size="lg" />
      <p>Chargement des quiz...</p>
    </div>
  } @else {
    <app-quiz-list 
      [quizzes]="filteredQuizzes()" 
      (quizDeleted)="onQuizDeleted($event)"
      (quizUpdated)="loadQuizzes()"
    />
  }

  <!-- Modal de choix de méthode -->
  @if (showMethodModal()) {
    <app-creation-method-modal
      (close)="closeMethodModal()"
      (methodSelected)="onMethodSelected($event)"
    ></app-creation-method-modal>
  }

  <!-- Modal d'import Excel -->
  @if (showExcelImportModal()) {
    <app-excel-import-modal
      (close)="closeExcelImportModal()"
      (import)="onExcelImport($event)"
    ></app-excel-import-modal>
  }
</div>

