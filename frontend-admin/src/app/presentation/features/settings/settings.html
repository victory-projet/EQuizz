<div class="settings-page">
  <!-- Header -->
  <div class="page-header">
    <div class="header-content">
      <h1>
        <app-svg-icon name="Settings" class="title-icon"></app-svg-icon>
        Paramètres
      </h1>
      <p class="subtitle">Gérez vos préférences et paramètres de compte</p>
    </div>
  </div>

  <div class="settings-container">
    <!-- Sidebar Navigation -->
    <div class="settings-sidebar">
      <button 
        class="tab-button"
        [class.active]="activeTab() === 'profile'"
        (click)="setActiveTab('profile')">
        <app-svg-icon name="User"></app-svg-icon>
        <span>Profil</span>
      </button>
      
      <button 
        class="tab-button"
        [class.active]="activeTab() === 'notifications'"
        (click)="setActiveTab('notifications')">
        <app-svg-icon name="Bell"></app-svg-icon>
        <span>Notifications</span>
      </button>
      
      <button 
        class="tab-button"
        [class.active]="activeTab() === 'preferences'"
        (click)="setActiveTab('preferences')">
        <app-svg-icon name="Settings"></app-svg-icon>
        <span>Préférences</span>
      </button>
      
      <button 
        class="tab-button"
        [class.active]="activeTab() === 'security'"
        (click)="setActiveTab('security')">
        <app-svg-icon name="Shield"></app-svg-icon>
        <span>Sécurité</span>
      </button>
    </div>

    <!-- Content Area -->
    <div class="settings-content">
      <!-- Profile Tab -->
      @if (activeTab() === 'profile') {
        <div class="settings-section">
          <div class="section-header">
            <h2>Informations du profil</h2>
            <p>Mettez à jour vos informations personnelles</p>
          </div>

          <form class="settings-form">
            <div class="form-row">
              <div class="form-group">
                <label>
                  <app-svg-icon name="User"></app-svg-icon>
                  Prénom
                </label>
                <input 
                  type="text" 
                  [(ngModel)]="settings().firstName"
                  name="firstName"
                  class="form-control">
              </div>

              <div class="form-group">
                <label>
                  <app-svg-icon name="User"></app-svg-icon>
                  Nom
                </label>
                <input 
                  type="text" 
                  [(ngModel)]="settings().lastName"
                  name="lastName"
                  class="form-control">
              </div>
            </div>

            <div class="form-group">
              <label>
                <app-svg-icon name="Mail"></app-svg-icon>
                Email
              </label>
              <input 
                type="email" 
                [(ngModel)]="settings().email"
                name="email"
                class="form-control">
            </div>

            <div class="form-actions">
              <button type="button" class="btn-primary" (click)="saveProfile()">
                <app-svg-icon name="Check"></app-svg-icon>
                Enregistrer
              </button>
            </div>
          </form>
        </div>
      }

      <!-- Notifications Tab -->
      @if (activeTab() === 'notifications') {
        <div class="settings-section">
          <div class="section-header">
            <h2>Préférences de notification</h2>
            <p>Choisissez comment vous souhaitez être notifié</p>
          </div>

          <form class="settings-form">
            <div class="toggle-group">
              <div class="toggle-item">
                <div class="toggle-info">
                  <div class="toggle-label">
                    <app-svg-icon name="Mail"></app-svg-icon>
                    Notifications par email
                  </div>
                  <p class="toggle-description">Recevoir des notifications par email</p>
                </div>
                <label class="toggle-switch">
                  <input 
                    type="checkbox" 
                    [(ngModel)]="settings().emailNotifications"
                    name="emailNotifications">
                  <span class="slider"></span>
                </label>
              </div>

              <div class="toggle-item">
                <div class="toggle-info">
                  <div class="toggle-label">
                    <app-svg-icon name="Bell"></app-svg-icon>
                    Rappels de quiz
                  </div>
                  <p class="toggle-description">Recevoir des rappels pour les quiz à venir</p>
                </div>
                <label class="toggle-switch">
                  <input 
                    type="checkbox" 
                    [(ngModel)]="settings().quizReminders"
                    name="quizReminders">
                  <span class="slider"></span>
                </label>
              </div>

              <div class="toggle-item">
                <div class="toggle-info">
                  <div class="toggle-label">
                    <app-svg-icon name="Calendar"></app-svg-icon>
                    Rapport hebdomadaire
                  </div>
                  <p class="toggle-description">Recevoir un résumé hebdomadaire des activités</p>
                </div>
                <label class="toggle-switch">
                  <input 
                    type="checkbox" 
                    [(ngModel)]="settings().weeklyReport"
                    name="weeklyReport">
                  <span class="slider"></span>
                </label>
              </div>
            </div>

            <div class="form-actions">
              <button type="button" class="btn-primary" (click)="saveNotifications()">
                <app-svg-icon name="Check"></app-svg-icon>
                Enregistrer
              </button>
            </div>
          </form>
        </div>
      }

      <!-- Preferences Tab -->
      @if (activeTab() === 'preferences') {
        <div class="settings-section">
          <div class="section-header">
            <h2>Préférences générales</h2>
            <p>Personnalisez votre expérience</p>
          </div>

          <form class="settings-form">
            <div class="form-group">
              <label>
                <app-svg-icon name="Globe"></app-svg-icon>
                Langue
              </label>
              <select 
                [(ngModel)]="settings().language"
                name="language"
                class="form-control">
                <option value="fr">Français</option>
                <option value="en">English</option>
                <option value="es">Español</option>
              </select>
            </div>

            <div class="form-group">
              <label>
                <app-svg-icon name="Clock"></app-svg-icon>
                Fuseau horaire
              </label>
              <select 
                [(ngModel)]="settings().timezone"
                name="timezone"
                class="form-control">
                <option value="Europe/Paris">Europe/Paris (GMT+1)</option>
                <option value="America/New_York">America/New York (GMT-5)</option>
                <option value="Asia/Tokyo">Asia/Tokyo (GMT+9)</option>
              </select>
            </div>

            <div class="form-group">
              <label>
                <app-svg-icon name="Calendar"></app-svg-icon>
                Format de date
              </label>
              <select 
                [(ngModel)]="settings().dateFormat"
                name="dateFormat"
                class="form-control">
                <option value="DD/MM/YYYY">DD/MM/YYYY</option>
                <option value="MM/DD/YYYY">MM/DD/YYYY</option>
                <option value="YYYY-MM-DD">YYYY-MM-DD</option>
              </select>
            </div>

            <div class="form-actions">
              <button type="button" class="btn-primary" (click)="savePreferences()">
                <app-svg-icon name="Check"></app-svg-icon>
                Enregistrer
              </button>
            </div>
          </form>
        </div>
      }

      <!-- Security Tab -->
      @if (activeTab() === 'security') {
        <div class="settings-section">
          <div class="section-header">
            <h2>Sécurité et confidentialité</h2>
            <p>Gérez vos paramètres de sécurité</p>
          </div>

          <form class="settings-form">
            <!-- Two-Factor Authentication -->
            <div class="toggle-group">
              <div class="toggle-item">
                <div class="toggle-info">
                  <div class="toggle-label">
                    <app-svg-icon name="Shield"></app-svg-icon>
                    Authentification à deux facteurs
                  </div>
                  <p class="toggle-description">Ajouter une couche de sécurité supplémentaire</p>
                </div>
                <label class="toggle-switch">
                  <input 
                    type="checkbox" 
                    [(ngModel)]="settings().twoFactorAuth"
                    name="twoFactorAuth">
                  <span class="slider"></span>
                </label>
              </div>
            </div>

            <!-- Session Timeout -->
            <div class="form-group">
              <label>
                <app-svg-icon name="Clock"></app-svg-icon>
                Délai d'expiration de session (minutes)
              </label>
              <select 
                [(ngModel)]="settings().sessionTimeout"
                name="sessionTimeout"
                class="form-control">
                <option [value]="15">15 minutes</option>
                <option [value]="30">30 minutes</option>
                <option [value]="60">1 heure</option>
                <option [value]="120">2 heures</option>
              </select>
            </div>

            <!-- Change Password -->
            <div class="password-section">
              <h3>Changer le mot de passe</h3>
              
              <div class="form-group">
                <label>
                  <app-svg-icon name="Lock"></app-svg-icon>
                  Mot de passe actuel
                </label>
                <input 
                  type="password" 
                  [(ngModel)]="passwordData.currentPassword"
                  name="currentPassword"
                  class="form-control">
              </div>

              <div class="form-group">
                <label>
                  <app-svg-icon name="Lock"></app-svg-icon>
                  Nouveau mot de passe
                </label>
                <input 
                  type="password" 
                  [(ngModel)]="passwordData.newPassword"
                  name="newPassword"
                  class="form-control">
              </div>

              <div class="form-group">
                <label>
                  <app-svg-icon name="Lock"></app-svg-icon>
                  Confirmer le mot de passe
                </label>
                <input 
                  type="password" 
                  [(ngModel)]="passwordData.confirmPassword"
                  name="confirmPassword"
                  class="form-control">
              </div>

              <button type="button" class="btn-secondary" (click)="changePassword()">
                <app-svg-icon name="Key"></app-svg-icon>
                Changer le mot de passe
              </button>
            </div>

            <div class="form-actions">
              <button type="button" class="btn-primary" (click)="saveSecurity()">
                <app-svg-icon name="Check"></app-svg-icon>
                Enregistrer
              </button>
            </div>
          </form>

          <!-- Danger Zone -->
          <div class="danger-zone">
            <h3>Zone de danger</h3>
            <p>Actions irréversibles</p>
            
            <div class="danger-actions">
              <button type="button" class="btn-outline" (click)="exportData()">
                <app-svg-icon name="Download"></app-svg-icon>
                Exporter mes données
              </button>
              
              <button type="button" class="btn-danger" (click)="deleteAccount()">
                <app-svg-icon name="Trash2"></app-svg-icon>
                Supprimer mon compte
              </button>
            </div>
          </div>
        </div>
      }
    </div>
  </div>
</div>
